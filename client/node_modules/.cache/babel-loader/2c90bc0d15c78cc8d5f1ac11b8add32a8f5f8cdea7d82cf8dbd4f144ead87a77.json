{"ast":null,"code":"var _jsxFileName = \"C:\\\\class\\\\CSC436\\\\week5\\\\hw3\\\\client\\\\src\\\\components\\\\Note.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useResource } from 'react-request-hook';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Note(props) {\n  _s();\n  const [isEditing, setIsEditing] = useState(false);\n  const [editedNote, setEditedNote] = useState({\n    title: props.title,\n    content: props.content\n  });\n  const [deleteResponse, deleteNote] = useResource(id => ({\n    url: `/posts/${id}`,\n    method: 'delete'\n  }));\n  const [toggleResponse, toggleTodo] = useResource(({\n    id,\n    isCompleted,\n    completedDate\n  }) => ({\n    url: `/posts/${id}`,\n    method: 'patch',\n    data: {\n      isCompleted,\n      completedDate\n    }\n  }));\n  const [editResponse, editTodo] = useResource(({\n    id,\n    title,\n    content,\n    createdDate,\n    isCompleted,\n    completedDate\n  }) => ({\n    url: `/posts/${id}`,\n    method: 'patch',\n    data: {\n      title,\n      content,\n      createdDate,\n      isCompleted,\n      completedDate\n    }\n  }));\n  useEffect(() => {\n    // console.log(editResponse);\n    // console.log(deleteResponse);\n    // console.log(toggleResponse);\n    if (deleteResponse && deleteResponse.error) {\n      console.error(deleteResponse.error);\n      window.alert(deleteResponse.error.data);\n    }\n    if (toggleResponse && toggleResponse.error) {\n      console.error(toggleResponse.error);\n      window.alert(toggleResponse.data);\n    }\n    if (editResponse && editResponse.error) {\n      console.error(editResponse.error);\n      window.alert(editResponse.error.data);\n    }\n  }, [deleteResponse, toggleResponse, editResponse]);\n\n  /*\n  The behavior of this function depends on the isEditing state. If currently in editing mode (i.e. isEditing is true),\n  It will submit the current edited note content. If it is not in edit mode, it will switch to edit mode. Each click \n  will switch the status of isEditing.\n  */\n  function handleEdit() {\n    if (isEditing) {\n      props.onEdit({\n        ...editedNote,\n        id: props.id,\n        createdDate: props.createdDate,\n        isCompleted: props.isCompleted,\n        completedDate: props.completedDate\n      });\n\n      //  editTodo(props.id, props.title, props.content, props.createdDate, props.isCompleted, props.completedDate);\n      editTodo({\n        id: props.id,\n        title: editedNote.title,\n        // use the edited title from the state\n        content: editedNote.content,\n        // use the edited content from the state\n        createdDate: props.createdDate,\n        isCompleted: props.isCompleted,\n        completedDate: props.completedDate\n      });\n    }\n    setIsEditing(!isEditing);\n  }\n  function handleDelete() {\n    props.onDelete(props.id);\n    deleteNote(props.id);\n  }\n  function handleCheckboxChange() {\n    props.onToggle(props.id);\n\n    // const newIsCompleted = !props.isCompleted;\n    // toggleTodo(props.id, props.isCompleted, props.completedDate);\n    toggleTodo({\n      id: props.id,\n      isCompleted: !props.isCompleted,\n      completedDate: props.completedDate\n    });\n  }\n  function handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setEditedNote(prevEditNote => {\n      return {\n        ...prevEditNote,\n        [name]: value\n      };\n    });\n  }\n\n  /**\n   * HandleEdit is a switching function that determines whether to save notes or switch to editing mode based on the current state \n   * of isEditing. When the state of the React component (in this case isEditing) changes, the component will be re rendered. \n   * Therefore, when the handleEdit function is called and the value of isEditing is changed, it will cause the component to re render. \n   * That is, re-entering the return section\n   */\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"note\",\n    children: [isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"title\",\n        value: editedNote.title,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"content\",\n        value: editedNote.content,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: props.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: props.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkbox-container\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: props.isCompleted,\n            onChange: handleCheckboxChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }, this), \"Completed\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"createdDate\",\n        children: [\"CreateTime: \", props.createdDate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), props.isCompleted && /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"completedDate\",\n        children: [\"Completed: \", props.completedDate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 39\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"edit-btn\",\n      onClick: handleEdit,\n      children: [\" \", isEditing ? \"SAVE\" : \"EDIT\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"delete-btn\",\n      onClick: handleDelete,\n      children: \"DELETE\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n_s(Note, \"l+IWTeB62YanaWdm0KiSl7AgyUM=\", false, function () {\n  return [useResource, useResource, useResource];\n});\n_c = Note;\nexport default Note;\nvar _c;\n$RefreshReg$(_c, \"Note\");","map":{"version":3,"names":["React","useState","useEffect","useResource","jsxDEV","_jsxDEV","Fragment","_Fragment","Note","props","_s","isEditing","setIsEditing","editedNote","setEditedNote","title","content","deleteResponse","deleteNote","id","url","method","toggleResponse","toggleTodo","isCompleted","completedDate","data","editResponse","editTodo","createdDate","error","console","window","alert","handleEdit","onEdit","handleDelete","onDelete","handleCheckboxChange","onToggle","handleChange","event","name","value","target","prevEditNote","className","children","onChange","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","onClick","_c","$RefreshReg$"],"sources":["C:/class/CSC436/week5/hw3/client/src/components/Note.jsx"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { useResource } from 'react-request-hook';\n\n\nfunction Note(props) {\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const [editedNote, setEditedNote] = useState({\n    title: props.title,\n    content: props.content\n  });\n\n  const [deleteResponse, deleteNote] = useResource((id) => ({\n    url: `/posts/${id}`,\n    method: 'delete'\n  }));\n\n  const [toggleResponse, toggleTodo] = useResource(({ id, isCompleted, completedDate }) => ({\n    url: `/posts/${id}`,\n    method: 'patch',\n    data: { isCompleted, completedDate }\n  }));\n\n  const [editResponse, editTodo] = useResource(({ id, title, content, createdDate, isCompleted, completedDate }) => ({\n    url: `/posts/${id}`,\n    method: 'patch',\n    data: { title, content, createdDate, isCompleted, completedDate }\n  }));\n\n  useEffect(() => {\n    // console.log(editResponse);\n    // console.log(deleteResponse);\n    // console.log(toggleResponse);\n    if (deleteResponse && deleteResponse.error) {\n      console.error(deleteResponse.error);\n      window.alert(deleteResponse.error.data);\n    }\n    if (toggleResponse && toggleResponse.error) {\n      console.error(toggleResponse.error);\n      window.alert(toggleResponse.data);\n    }\n    if (editResponse && editResponse.error){\n      console.error(editResponse.error);\n      window.alert(editResponse.error.data);\n    }\n  }, [deleteResponse, toggleResponse, editResponse]);\n\n  /*\n  The behavior of this function depends on the isEditing state. If currently in editing mode (i.e. isEditing is true),\n  It will submit the current edited note content. If it is not in edit mode, it will switch to edit mode. Each click \n  will switch the status of isEditing.\n  */\n  function handleEdit() {\n    if (isEditing) {\n        props.onEdit({ ...editedNote, \n          id: props.id,\n          createdDate: props.createdDate,\n          isCompleted: props.isCompleted,         \n          completedDate: props.completedDate \n         });\n\n        //  editTodo(props.id, props.title, props.content, props.createdDate, props.isCompleted, props.completedDate);\n        editTodo({\n          id: props.id,\n          title: editedNote.title, // use the edited title from the state\n          content: editedNote.content, // use the edited content from the state\n          createdDate: props.createdDate,\n          isCompleted: props.isCompleted,\n          completedDate: props.completedDate\n        });\n\n    }\n    setIsEditing(!isEditing);\n  }\n\n\n  function handleDelete() {\n    props.onDelete(props.id);\n    deleteNote(props.id);\n  }\n\n\n  function handleCheckboxChange() {\n    props.onToggle(props.id);\n\n    // const newIsCompleted = !props.isCompleted;\n    // toggleTodo(props.id, props.isCompleted, props.completedDate);\n    toggleTodo({\n      id: props.id,\n      isCompleted: !props.isCompleted,\n      completedDate: props.completedDate\n    });\n  }\n\n\n  function handleChange(event) {\n    const { name, value } = event.target;\n\n    setEditedNote(prevEditNote => {\n      return {\n        ...prevEditNote,\n        [name]: value\n      };\n    });\n  }\n\n\n  /**\n   * HandleEdit is a switching function that determines whether to save notes or switch to editing mode based on the current state \n   * of isEditing. When the state of the React component (in this case isEditing) changes, the component will be re rendered. \n   * Therefore, when the handleEdit function is called and the value of isEditing is changed, it will cause the component to re render. \n   * That is, re-entering the return section\n   */\n\n  \n  return (\n    <div className=\"note\">\n        {isEditing ? (\n            <div>\n                <input \n                    name=\"title\"\n                    value={editedNote.title}\n                    onChange={handleChange}\n                />\n                <textarea\n                    name=\"content\" \n                    value={editedNote.content}\n                    onChange={handleChange}\n                />\n            </div>\n        ) : (\n            <>\n                <h1>{props.title}</h1>\n                <p>{props.content}</p>\n\n                {/* Checkbox for completion status */}\n                <div className=\"checkbox-container\">\n                  <label>\n                    <input \n                      type=\"checkbox\" \n                      checked={props.isCompleted} \n                      onChange={handleCheckboxChange} \n                    />\n                    Completed\n                  </label>\n                </div>\n\n                <h2 className=\"createdDate\">CreateTime: {props.createdDate}</h2>\n                {props.isCompleted && <h2 className=\"completedDate\">Completed: {props.completedDate}</h2>}\n                \n            </>\n        )}\n        <button className=\"edit-btn\" onClick={handleEdit}> {isEditing ?  \"SAVE\" : \"EDIT\"}</button>\n        <button className=\"delete-btn\" onClick={handleDelete}>DELETE</button>\n    </div>\n  );\n\n}\n\nexport default Note;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}